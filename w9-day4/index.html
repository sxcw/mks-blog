<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="MakerSqaure experience"><title>Day 44 Is Postgres Postgres and Postgres | MKS Daily</title><link rel="stylesheet" type="text/css" href="/mks-blog//css/normalize.css"><link rel="stylesheet" type="text/css" href="/mks-blog//css/highlight.css"><link rel="stylesheet" type="text/css" href="/mks-blog//css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway|Droid+Serif|Lobster+Two:700"><link rel="Shortcut Icon" type="image/x-icon" href="/mks-blog/favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/mks-blog/." class="title">MKS Daily</a><span class="subtitle">... <span class="special">once in a lifetime </span> bootcamp experience at MakerSquare</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/mks-blog/." class="sidebar-nav-item">Home</a><a href="/mks-blog/archives" class="sidebar-nav-item">Archives</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>Day 44 Is Postgres Postgres and Postgres</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">2016-07-28</div><div class="post-tags"><a class="post-tag-link" href="/mks-blog/tags/during-bootcamp/">during-bootcamp</a>/<a class="post-tag-link" href="/mks-blog/tags/postgres/">postgres</a>/<a class="post-tag-link" href="/mks-blog/tags/thesis/">thesis</a></div></div></div><article><div class="container post"><p>I fought with postgres for the entire morning today and finally fixed the problem by hours of googling and stack overflowing. </p>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>I have <a href="http://postgresapp.com/" target="_blank"> Postgres.app</a> and <a href="http://www.enterprisedb.com/products-services-training/pgdownload" target="_blank">EnterpriseDB Installer</a> installed and for some reason, both of them are competing for the same port. The error message I kept getting was: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WARNING: could not create listen socket for &quot;localhost&quot; </span><br><span class="line">FATAL: could not create any TCP/IP sockets</span><br></pre></td></tr></table></figure>
<p>I am not sure why the conflict happened. Even when I closed out the Postgres.app, the EnterpriseDB still complained about port 5432 was taken. I decided wiping out all the postgres programs and started from fresh.  </p>
<p>There are many ways to remove postgres, depending on how you installed it initially. I found <a href="http://stackoverflow.com/questions/8037729/completely-uninstall-postgresql-9-0-4-from-mac-osx-lion/9240197#9240197" target="_blank"> this stack overflow </a>  and <a href="http://hzchirs-blog.logdown.com/posts/142678-how-completely-uninstall-postgresql-9x-on-mac-osx" target="_blank"> this post </a> helpful. Note that you cannot drag Postgres.app to trash if it is still running. Make sure it stops and then kills it.  Checkout <a href="http://www.uninstallmacapp.com/postgres-app-9-4-2-0-removal.html" target="_blank"> this article </a> if you run into this issue. </p>
<h2 id="Time-to-Reinstall"><a href="#Time-to-Reinstall" class="headerlink" title="Time to Reinstall"></a>Time to Reinstall</h2><p>Okay, now I can start fresh.  I am on a mac and using homebrew looks like the easiest.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// first, check if you have homebrew installed</span><br><span class="line">which brew</span><br><span class="line">// update homebrew</span><br><span class="line">brew update</span><br></pre></td></tr></table></figure>
<p>Here comes the exciting part– install postgres!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install postgres</span><br><span class="line">// check version installed</span><br><span class="line">brew info postgres</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// if brew services not installed</span><br><span class="line">brew tap homebrew/services</span><br><span class="line">// run postgres as background service</span><br><span class="line">brew services start postgresql</span><br></pre></td></tr></table></figure>
<p>Then I tried <code>initdb /usr/local/var/postgres</code> but got some warnings:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">initdb: directory &quot;/usr/local/var/postgres&quot; exists but is not empty If you want to create a new database system, either remove or empty the directory &quot;/usr/local/var/postgres&quot; or run initdb with an argument other than &quot;/usr/local/var/postgres&quot;.</span><br></pre></td></tr></table></figure>
<p>To fix this, we need:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">initdb `brew --prefix`/var/postgres/data -E utf8</span><br></pre></td></tr></table></figure></p>
<p>The data directory is under postgres home directory, by doing the above command, log file can be shared.  I am still not sure why this fixed the issue but I am glad it did. </p>
<p>Great, postgres is up and running, now is time to create database.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// create database</span><br><span class="line">createdb YOUR_DATABASE_NAME</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// drop database</span><br><span class="line">dropdb YOUR_DATABASE_NAME</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// run database</span><br><span class="line">psql YOUR_DATABASE_NAME</span><br></pre></td></tr></table></figure>
</div><!-- comment system--><div class="container"></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="https://github.com/sxcw" target="_blank"><i class="fa fa-github"></i></a></div><div class="footer">© 2016 <a href="/mks-blog/." rel="nofollow">MKS Daily</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});</script></body></html>