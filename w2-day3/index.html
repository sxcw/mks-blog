<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="MakerSqaure experience"><title>Day 8 Is Asynchronous | MKS Daily</title><link rel="stylesheet" type="text/css" href="/mks-blog//css/normalize.css"><link rel="stylesheet" type="text/css" href="/mks-blog//css/highlight.css"><link rel="stylesheet" type="text/css" href="/mks-blog//css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway|Droid+Serif|Lobster+Two:700"><link rel="Shortcut Icon" type="image/x-icon" href="/mks-blog/favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/mks-blog/." class="title">MKS Daily</a><span class="subtitle">... <span class="special">once in a lifetime </span> bootcamp experience at MakerSquare</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/mks-blog/." class="sidebar-nav-item">Home</a><a href="/mks-blog/archives" class="sidebar-nav-item">Archives</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>Day 8 Is Asynchronous</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">2016-06-08</div><div class="post-tags"><a class="post-tag-link" href="/mks-blog/tags/asynchronous/">asynchronous</a>/<a class="post-tag-link" href="/mks-blog/tags/during-bootcamp/">during-bootcamp</a>/<a class="post-tag-link" href="/mks-blog/tags/functional-programming/">functional-programming</a></div></div></div><article><div class="container post"><p>Today I will continue to do some pair-programming on functional programming problems. I will get deeper into using callbacks.  </p>
<h2 id="Self-Studying-Notes"><a href="#Self-Studying-Notes" class="headerlink" title="Self-Studying Notes:"></a>Self-Studying Notes:</h2><ul>
<li>Pure functions don’t change anything. They are testable, portable, memoization, parallelization(can run several copies of same function at a time).</li>
<li>In essence, what that setTimeout(..) call is doing, besides setting up a timer, is marking the entry point to resume the program at that later time. It’s like saying to the engine, “when you resume, call back into my program at this point.” And thus we get “callback”.</li>
<li>Promises: continuation events.  A promise is a future value or eventual value. It’s a placeholder for a value that we expect to eventually arrive, and once it does, it’s fixed and immutable from then on.</li>
<li>Promises as a callback management system: promises can only be resolved once, so a callback registered in a then(..) can only possibly ever be called once, no matter what the originator of the promise tries to do. This restoration of trust is the most essential part of why promises exist.</li>
<li>Promise chain lets you express a vertically oriented series of steps, any or all of which can be asynchronous in completion. Promises encapsulate the time-dependent state – waiting on the fulfillment or rejection of the underlying value – from the outside, the Promise itself is time-independent, and thus Promises can be composed (combined) in predictable ways regardless of the timing or outcome underneath.</li>
<li><code>then(..)</code> always produces a promise</li>
<li>“I am reasoning about my future cheeseburger already, even though I don’t have it in my hands yet. My brain is able to do this because it’s treating the order number as a placeholder for the cheeseburger. The placeholder essentially makes the value time independent. It’s a future value.” – read more at <a href="https://github.com/getify/You-Dont-Know-JS/blob/master/async%20%26%20performance/ch3.md" target="_blank">You Don’t Know JS : Promises</a>.</li>
</ul>
<h2 id="Asynchronous"><a href="#Asynchronous" class="headerlink" title="Asynchronous"></a>Asynchronous</h2><ul>
<li>Asynchronous with plain callbacks + promises</li>
<li>Run the entire block of code first before any asynchronous code can run. Asynchronous code does not run until later.</li>
<li>Single-threaded nature: Only a line of code can run at the same time. Anything that takes a lot of work can be put into the background. </li>
<li>Timer starts immediately.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;A&quot;);</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(&quot;B&quot;);</span><br><span class="line">&#125;, 3000);</span><br><span class="line"></span><br><span class="line">superLongComputation(); // this takes 5 secs to run</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(&quot;C&quot;);</span><br><span class="line">&#125;, 2500);</span><br><span class="line"></span><br><span class="line">console.log(&quot;D&quot;);</span><br></pre></td></tr></table></figure>
<p>Answer: ADBC </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function playerStats()&#123;</span><br><span class="line">	var API = DataAPI.Callback;</span><br><span class="line">	var data = null;</span><br><span class="line">	// please send this request to server ( initiate asynchronous call, the callback function needs to wait till we hear something from server)</span><br><span class="line">	API.getAllPlayers(function(players)&#123;</span><br><span class="line">		players ==&gt; array</span><br><span class="line">		data = players;</span><br><span class="line">		console.log(&apos;Data2: &apos;, data )</span><br><span class="line">	&#125;)</span><br><span class="line">	console.log(&apos;Data: &apos;, data ) // this console logs null</span><br><span class="line">&#125;</span><br><span class="line">playerStats();</span><br></pre></td></tr></table></figure>
<ul>
<li>Callback hell is composed of these two flaws: 1)Non-trustability of the callback’s invocation, due to Inversion of Control<br>2) Non-linear, non-sequential reasoning<br>3) ‘pyramid of doom’</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// line1</span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">	//line3</span><br><span class="line">	//line4</span><br><span class="line">&#125;,1000)</span><br><span class="line">// line2</span><br></pre></td></tr></table></figure>
<ul>
<li>Inversion of Control: there is a part of program I am in control of executing (line1,line2) and there is a portion of my code that I am not in control of executing(line3, line4). (so put that portion in the callback so it will execute in the callback–&gt; inverse the control)<br>*<code>setTimeout</code> is the utility function, we don’t worry too much about the timer not calling the callback. (no trust issue: not too early/late, not too many/few times, no swallowed errors…)</li>
<li>Thunks: from a synchronous perspective, a thunk is a function that has everything it needs to run the function and gives value back. A function that has a closure state keeping track of some values and give you those values back when we call the function</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// synchronous example: thunk </span><br><span class="line">function add(x,y)&#123;</span><br><span class="line">	return x+y;</span><br><span class="line">&#125;</span><br><span class="line">var thunk = function()&#123;</span><br><span class="line">	return add (10,15);</span><br><span class="line">&#125;</span><br><span class="line">thunk(); // 25 -- thunk becomes the container of a particular state. It becomes a token that represents 25.  (Promises: a wrapper around a value)</span><br></pre></td></tr></table></figure>
<ul>
<li>Promises are like asynchronous thunks: they don’t need any more values passing into them to do their jobs– except we do need to pass callbacks so we can get values back. </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// asynchronous example: thunk </span><br><span class="line">function addAsync(x,y,cb)&#123;</span><br><span class="line">	setTimeout(function()&#123;</span><br><span class="line">		cb(x+y);</span><br><span class="line">	&#125;,1000);</span><br><span class="line">&#125;</span><br><span class="line">var thunk = function(cb)&#123;</span><br><span class="line">	addAsync(10,15,cb);</span><br><span class="line">&#125;</span><br><span class="line">thunk(function(sum)&#123;</span><br><span class="line">	sum; // 25</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</div><!-- comment system--><div class="container"></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="https://github.com/sxcw" target="_blank"><i class="fa fa-github"></i></a></div><div class="footer">© 2016 <a href="/mks-blog/." rel="nofollow">MKS Daily</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});</script></body></html>